import{A as O,s as H,e as b,b as I,d as v,f as T,j as V,i as g,v as u,B as J,w as K,k as P,l as m,n as F,t as G,C as j,h as X,D as N,E as D,F as z,G as Q}from"../chunks/scheduler.DdJLkDdy.js";import{S as W,i as Y,t as U,f as Z}from"../chunks/index.CySWMwuL.js";import{a as x,c as $,b as ee}from"../chunks/config.CmNLtYwl.js";const te=$.apiRoot,M=x.create();M.interceptors.request.use(n=>(n.headers["Content-Type"]="application/json",n),function(n){return Promise.reject(n)});class se{async solicitarToken(e){return(await M.post(`${te}/security/auth/token`,{email:e})).data.result}}const re=new se;function ne(n){const e=n-1;return e*e*e+1}function le(n,{delay:e=0,duration:t=400,easing:f=ne,x:i=0,y:a=0,opacity:s=0}={}){const _=getComputedStyle(n),c=+_.opacity,d=_.transform==="none"?"":_.transform,o=c*(1-s),[l,r]=O(i),[h,p]=O(a);return{delay:e,duration:t,easing:f,css:(y,C)=>`
			transform: ${d} translate(${(1-y)*l}${r}, ${(1-y)*h}${p});
			opacity: ${c-o*C}`}}function q(n){let e,t,f="Favor de ingresar su correo electrónico",i,a,s,_,c,d,o,l,r=n[3]&&B();return{c(){e=b("div"),t=b("p"),t.textContent=f,i=I(),a=b("div"),s=b("input"),_=I(),c=b("button"),r&&r.c(),d=G(`
                Enviarme token de acceso`),this.h()},l(h){e=v(h,"DIV",{});var p=T(e);t=v(p,"P",{class:!0,"data-svelte-h":!0}),j(t)!=="svelte-fnbgtv"&&(t.textContent=f),i=V(p),a=v(p,"DIV",{"data-mdb-input-init":!0,class:!0});var y=T(a);s=v(y,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),y.forEach(g),_=V(p),c=v(p,"BUTTON",{class:!0});var C=T(c);r&&r.l(C),d=X(C,`
                Enviarme token de acceso`),C.forEach(g),p.forEach(g),this.h()},h(){u(t,"class","mt-3 mb-4"),u(s,"type","email"),u(s,"id","typeEmailX"),u(s,"class","form-control form-control-lg"),u(s,"placeholder","Correo electrónico"),u(a,"data-mdb-input-init",""),u(a,"class","form-outline form-white mb-3"),u(c,"class","btn btn-primary btn-lg px-5"),c.disabled=n[3]},m(h,p){P(h,e,p),m(e,t),m(e,i),m(e,a),m(a,s),N(s,n[1]),m(e,_),m(e,c),r&&r.m(c,null),m(c,d),o||(l=[D(s,"input",n[7]),D(c,"click",n[5])],o=!0)},p(h,p){p&2&&s.value!==h[1]&&N(s,h[1]),h[3]?r||(r=B(),r.c(),r.m(c,d)):r&&(r.d(1),r=null),p&8&&(c.disabled=h[3])},d(h){h&&g(e),r&&r.d(),o=!1,z(l)}}}function B(n){let e;return{c(){e=b("span"),this.h()},l(t){e=v(t,"SPAN",{class:!0,role:!0,"aria-hidden":!0}),T(e).forEach(g),this.h()},h(){u(e,"class","spinner-border spinner-border-sm"),u(e,"role","status"),u(e,"aria-hidden","true")},m(t,f){P(t,e,f)},d(t){t&&g(e)}}}function L(n){let e,t,f="Ingrese el token que recibió por correo",i,a,s,_,c,d="Regresar",o,l,r,h,p,y,C,k=n[4]&&R();return{c(){e=b("div"),t=b("p"),t.textContent=f,i=I(),a=b("div"),s=b("input"),_=I(),c=b("button"),c.textContent=d,o=I(),l=b("button"),k&&k.c(),r=G(`
                Acceder`),this.h()},l(E){e=v(E,"DIV",{});var w=T(e);t=v(w,"P",{class:!0,"data-svelte-h":!0}),j(t)!=="svelte-1vontj2"&&(t.textContent=f),i=V(w),a=v(w,"DIV",{"data-mdb-input-init":!0,class:!0});var A=T(a);s=v(A,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),A.forEach(g),_=V(w),c=v(w,"BUTTON",{class:!0,"data-svelte-h":!0}),j(c)!=="svelte-ny3m8d"&&(c.textContent=d),o=V(w),l=v(w,"BUTTON",{class:!0});var S=T(l);k&&k.l(S),r=X(S,`
                Acceder`),S.forEach(g),w.forEach(g),this.h()},h(){u(t,"class","mt-3 mb-4"),u(s,"type","password"),u(s,"id","typePasswordX"),u(s,"class","form-control form-control-lg"),u(s,"placeholder","Token de acceso"),u(a,"data-mdb-input-init",""),u(a,"class","form-outline form-white mb-3"),u(c,"class","btn btn-secondary btn-lg px-5"),u(l,"class","btn btn-primary btn-lg px-5"),l.disabled=h=n[4]||!n[2].length},m(E,w){P(E,e,w),m(e,t),m(e,i),m(e,a),m(a,s),N(s,n[2]),m(e,_),m(e,c),m(e,o),m(e,l),k&&k.m(l,null),m(l,r),y||(C=[D(s,"input",n[8]),D(c,"click",n[9]),D(l,"click",n[6])],y=!0)},p(E,w){w&4&&s.value!==E[2]&&N(s,E[2]),E[4]?k||(k=R(),k.c(),k.m(l,r)):k&&(k.d(1),k=null),w&20&&h!==(h=E[4]||!E[2].length)&&(l.disabled=h)},i(E){E&&(p||Q(()=>{p=Z(e,le,{x:200,duration:500,delay:300}),p.start()}))},o:F,d(E){E&&g(e),k&&k.d(),y=!1,z(C)}}}function R(n){let e;return{c(){e=b("span"),this.h()},l(t){e=v(t,"SPAN",{class:!0,role:!0,"aria-hidden":!0}),T(e).forEach(g),this.h()},h(){u(e,"class","spinner-border spinner-border-sm"),u(e,"role","status"),u(e,"aria-hidden","true")},m(t,f){P(t,e,f)},d(t){t&&g(e)}}}function ie(n){let e,t,f,i,a,s,_,c,d=n[0]===1&&q(n),o=n[0]===2&&L(n);return{c(){e=b("div"),t=b("div"),f=b("div"),i=b("div"),a=b("img"),_=I(),d&&d.c(),c=I(),o&&o.c(),this.h()},l(l){e=v(l,"DIV",{class:!0});var r=T(e);t=v(r,"DIV",{class:!0,style:!0});var h=T(t);f=v(h,"DIV",{class:!0});var p=T(f);i=v(p,"DIV",{class:!0});var y=T(i);a=v(y,"IMG",{alt:!0,class:!0,src:!0}),_=V(y),d&&d.l(y),c=V(y),o&&o.l(y),y.forEach(g),p.forEach(g),h.forEach(g),r.forEach(g),this.h()},h(){u(a,"alt","logo"),u(a,"class","logo"),J(a.src,s=ee)||u(a,"src",s),u(i,"class","mb-md-5 mt-md-4 pb-5"),u(f,"class","card-body p-5 text-center"),u(t,"class","card svelte-1i96uja"),K(t,"border-radius","1rem"),u(e,"class","cpl--login svelte-1i96uja")},m(l,r){P(l,e,r),m(e,t),m(t,f),m(f,i),m(i,a),m(i,_),d&&d.m(i,null),m(i,c),o&&o.m(i,null)},p(l,[r]){l[0]===1?d?d.p(l,r):(d=q(l),d.c(),d.m(i,c)):d&&(d.d(1),d=null),l[0]===2?o?(o.p(l,r),r&1&&U(o,1)):(o=L(l),o.c(),U(o,1),o.m(i,null)):o&&(o.d(1),o=null)},i(l){U(o)},o:F,d(l){l&&g(e),d&&d.d(),o&&o.d()}}}function ae(n,e,t){let f=1,i="",a="",s=!1,_=!1;async function c(){if(t(1,i=i.trim()),!!o())try{t(3,s=!0),await re.solicitarToken(i),setTimeout(()=>{t(0,f=2),t(1,i=""),t(3,s=!1)},1e3)}catch{alert("No cuenta con permisos de acceso.")}finally{t(3,s=!1)}}async function d(){if(a.trim().length)try{t(4,_=!0),setTimeout(()=>{sessionStorage.setItem("_coppelai_token",a),t(4,_=!1),window.location.href="/"},1500)}catch{alert("Ocurrió un error")}finally{t(4,_=!1)}}function o(){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(i)?!0:(alert("Introduzca un correo válido"),!1)}function l(){i=this.value,t(1,i)}function r(){a=this.value,t(2,a)}return[f,i,a,s,_,c,d,l,r,()=>t(0,f=1)]}class de extends W{constructor(e){super(),Y(this,e,ae,ie,H,{})}}export{de as component};
